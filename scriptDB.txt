CREATE TABLE CATEGORIES (
  CATEGORY_ID SERIAL PRIMARY KEY,
  CATEGORY_NAME VARCHAR(40) NOT NULL
);

CREATE TABLE COMPETITIONS (
  COMPETITION_ID BIGINT PRIMARY KEY,
  COMPETITION_NAME VARCHAR(30) NOT NULL,
  PLACE VARCHAR(50) NOT NULL,
  DATE DATE NOT NULL,
  CATEGORY_ID BIGINT NOT NULL
);

CREATE TABLE RACES (
  RACE_ID BIGINT PRIMARY KEY,
  RACE_NAME VARCHAR(35) NOT NULL,
  COMPETITION_ID BIGINT NOT NULL
);

CREATE TABLE COMPETITORS (
  COMPETITOR_ID BIGINT PRIMARY KEY,
  FIRST_NAME VARCHAR(20) NOT NULL,
  LAST_NAME VARCHAR(25) NOT NULL,
  EMAIL VARCHAR(25) NOT NULL UNIQUE,
  GENDER VARCHAR(10) NOT NULL,
  SIZE VARCHAR(5) NOT NULL
);

CREATE TABLE REGISTRATIONS (
  REGISTER_ID BIGINT PRIMARY KEY,
  COMPETITION_ID BIGINT NOT NULL,
  COMPETITOR_ID BIGINT NOT NULL,
  RACE_ID BIGINT NOT NULL,
  TIME TIME
);

ALTER TABLE COMPETITIONS ADD FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORIES (CATEGORY_ID);
ALTER TABLE RACES ADD FOREIGN KEY (COMPETITION_ID) REFERENCES COMPETITIONS(COMPETITION_ID);
ALTER TABLE REGISTRATIONS ADD FOREIGN KEY (COMPETITION_ID) REFERENCES COMPETITIONS(COMPETITION_ID);
ALTER TABLE REGISTRATIONS ADD FOREIGN KEY (COMPETITOR_ID) REFERENCES COMPETITORS(COMPETITOR_ID);
ALTER TABLE REGISTRATIONS ADD FOREIGN KEY (RACE_ID) REFERENCES RACES(RACE_ID);


INSERT INTO CATEGORIES(CATEGORY_NAME) VALUES('FOOTBALL');
INSERT INTO CATEGORIES VALUES(20, 'PING-PONG');

SELECT * FROM CATEGORIES;
